"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),i=require("react-window"),r=e(require("lodash/debounce")),n=e(require("lodash/isEqual"));function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var i,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(i=a[r])>=0||(n[i]=e[i]);return n}var o=function(e){var i,r;function n(){var t;return(t=e.apply(this,arguments)||this).state={height:t.props.defaultHeight||0,width:t.props.defaultWidth||0},t._onResize=function(){var e=t.props,i=e.disableHeight,r=e.disableWidth,n=e.onResize;if(t._parentNode){var a=t._parentNode.offsetHeight||0,s=t._parentNode.offsetWidth||0,o=window.getComputedStyle(t._parentNode)||{},l=parseInt(o.paddingLeft,10)||0,d=parseInt(o.paddingRight,10)||0,c=parseInt(o.paddingTop,10)||0,u=parseInt(o.paddingBottom,10)||0;(!i&&t.state.height!==a-c-u||!r&&t.state.width!==s-l-d)&&(t.setState({height:a-c-u,width:s-l-d}),n({height:a,width:s}))}},t._setRef=function(e){t._autoSizer=e},t}r=e,(i=n).prototype=Object.create(r.prototype),i.prototype.constructor=i,i.__proto__=r;var s=n.prototype;return s.componentDidMount=function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=function(e){var t;t="undefined"!=typeof window?window:"undefined"!=typeof self?self:global;var i,r,n="undefined"!=typeof document&&document.attachEvent;if(!n){var a=(r=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(e){return t.setTimeout(e,20)},function(e){return r(e)}),s=(i=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.clearTimeout,function(e){return i(e)}),o=function(e){var t=e.__resizeTriggers__,i=t.firstElementChild,r=t.lastElementChild,n=i.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,n.style.width=i.offsetWidth+1+"px",n.style.height=i.offsetHeight+1+"px",i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight},l=function(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;o(this),this.__resizeRAF__&&s(this.__resizeRAF__),this.__resizeRAF__=a((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(i){i.call(t,e)})))}))}},d=!1,c="",u="animationstart",m="Webkit Moz O ms".split(" "),h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),f=document.createElement("fakeelement");if(void 0!==f.style.animationName&&(d=!0),!1===d)for(var _=0;_<m.length;_++)if(void 0!==f.style[m[_]+"AnimationName"]){c="-"+m[_].toLowerCase()+"-",u=h[_],d=!0;break}var p="resizeanim",g="@"+c+"keyframes "+p+" { from { opacity: 0; } to { opacity: 0; } } ",v=c+"animation: 1ms "+p+"; "}return{addResizeListener:function(i,r){if(n)i.attachEvent("onresize",r);else{if(!i.__resizeTriggers__){var a=i.ownerDocument,s=t.getComputedStyle(i);s&&"static"==s.position&&(i.style.position="relative"),function(t){if(!t.getElementById("detectElementResize")){var i=(g||"")+".resize-triggers { "+(v||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',r=t.head||t.getElementsByTagName("head")[0],n=t.createElement("style");n.id="detectElementResize",n.type="text/css",null!=e&&n.setAttribute("nonce",e),n.styleSheet?n.styleSheet.cssText=i:n.appendChild(t.createTextNode(i)),r.appendChild(n)}}(a),i.__resizeLast__={},i.__resizeListeners__=[],(i.__resizeTriggers__=a.createElement("div")).className="resize-triggers",i.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',i.appendChild(i.__resizeTriggers__),o(i),i.addEventListener("scroll",l,!0),u&&(i.__resizeTriggers__.__animationListener__=function(e){e.animationName==p&&o(i)},i.__resizeTriggers__.addEventListener(u,i.__resizeTriggers__.__animationListener__))}i.__resizeListeners__.push(r)}},removeResizeListener:function(e,t){if(n)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",l,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(u,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())},s.componentWillUnmount=function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)},s.render=function(){var e=this.props,i=e.children,r=e.className,n=e.disableWidth,s=e.style,o=this.state,l=o.height,d=o.width,c={overflow:"visible"},u={},m=!1;return e.disableHeight||(0===l&&(m=!0),c.height=0,u.height=l),n||(0===d&&(m=!0),c.width=0,u.width=d),t.createElement(this.props.innerElementType||"div",{className:r,ref:this._setRef,style:a({},c,s)},!m&&i(u))},n}(t.PureComponent);o.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}};var l=t.useMemo,d=t.useReducer,c={header:[0,0],row:[0,0],table:[0,0]},u=function(e,t){var i,r=t.entity;return r&&(c=a({},c,((i={})[r]=t.dimensions,i)),!n(e[r],c[r]))?c:e},m=function(e){var i=e.measure,n=e.entity,a=e.debounceWait,s=e.innerElementType,d=void 0===s?"div":s,c=l((function(){return r(i,a,{leading:!0})}),[i,a]),u=a>0?c:i;return t.createElement(o,{innerElementType:d,onResize:function(e){u({dimensions:[e.height,e.width],entity:n})}},(function(){return null}))},h=["style","sampleRow"],f=["columns","data","rowHeight","height","width","className","rowClassName","classNamePrefix"];function _(e,t){return!!h.every((function(i){return JSON.stringify(e[i])===JSON.stringify(t[i])}))&&f.every((function(i){return e[i]===t[i]}))}var p=i.FixedSizeList,g=i.VariableSizeList,v=i.areEqual,y=t.useContext,w=t.memo,b=t.useMemo,z=(0,t.createContext)({columns:[],data:[],Cell:"div",Row:"div",Table:"div",Body:"div",classNamePrefix:"",tableClassName:"",rowClassName:"",rowWidthOffset:0}),E=function(e){var i=e.classNamePrefix,r=e.datum,n=e.Cell,a=e.index,s=void 0===a?0:a;return t.createElement(t.Fragment,null,e.columns.map((function(e,a){var o=e.width,l=e.Component;return t.createElement(n,{key:a,style:{width:o+"px",flexGrow:o,display:"inline-block",overflow:"auto",boxSizing:"border-box"},className:i+"table-cell",row:r,column:e,index:s},t.createElement(void 0===l?"div":l,{row:r,column:e,index:s},r[e.key]))})))},N=w((function(e){var i=e.index,r=e.style,n=y(z),s=n.columns,o=n.data,l=n.Cell,d=n.classNamePrefix,c=n.Row,u=n.rowClassName,m=b((function(){return"function"==typeof u?u(i):u}),[i,u]);return t.createElement(c,{style:a({},r,{display:"flex"}),className:""+d+m,index:i,row:o[i]},t.createElement(E,{datum:o[i],Cell:l,classNamePrefix:d,columns:s,index:i}))}),v),C=function(e){var i=e.Header,r=e.HeaderRow,n=e.HeaderCell,a=e.children,s=y(z),o=s.columns,l=s.classNamePrefix,d=s.rowWidthOffset,c=t.useRef(null),u=c&&c.current&&c.current.firstChild&&getComputedStyle(c.current.firstChild).backgroundColor;return t.createElement(i,{className:l+"table-header",style:{backgroundColor:u}},t.createElement(r,{style:{display:"flex",width:"calc(100% - "+d+"px)"},className:l+"table-header-row",ref:c},a,o.map((function(e){var i=e.width,r=e.HeaderCell;return t.createElement(void 0===r?n:r,{key:"header"+e.key,style:{width:i+"px",display:"inline-block",flexGrow:i},className:l+"table-header-cell",column:e},e.title)}))))},x=function(e){var i=e.children,r=s(e,["children"]),n=y(z),a=n.classNamePrefix,o=n.Body;return t.createElement(n.Table,Object.assign({},r,{className:n.tableClassName}),t.createElement(o,{className:a+"table-body"},i))},R=w(t.forwardRef((function(e,i){var r=e.columns,n=e.data,o=e.rowHeight,l=e.height,h=e.width,f=e.overscanCount,_=void 0===f?1:f,v=e.disableHeader,y=void 0!==v&&v,w=e.style,b=void 0===w?{}:w,R=e.Cell,T=void 0===R?"div":R,H=e.HeaderCell,L=void 0===H?"div":H,S=e.Table,O=void 0===S?"div":S,W=e.Header,k=void 0===W?"div":W,P=e.HeaderRow,A=void 0===P?"div":P,F=e.Row,I=void 0===F?"div":F,j=e.Body,B=void 0===j?"div":j,M=e.sampleRowIndex,q=void 0===M?0:M,D=e.sampleRow,V=e.className,G=void 0===V?"":V,J=e.rowClassName,U=void 0===J?"table-row":J,Y=e.classNamePrefix,K=void 0===Y?"":Y,Q=e.debounceWait,X=void 0===Q?0:Q,Z=e.headerCellInnerElementType,$=void 0===Z?"div":Z,ee=e.tableCellInnerElementType,te=void 0===ee?"div":ee,ie=e.tableOuterRef,re=e.tableOuterElementType,ne=s(e,["columns","data","rowHeight","height","width","overscanCount","disableHeader","style","Cell","HeaderCell","Table","Header","HeaderRow","Row","Body","sampleRowIndex","sampleRow","className","rowClassName","classNamePrefix","debounceWait","headerCellInnerElementType","tableCellInnerElementType","tableOuterRef","tableOuterElementType"]),ae=t.useRef(null),se=K+"table "+G,oe=o&&"function"==typeof o?g:p,le=r.reduce((function(e,t){return e+t.width}),0),de=d(u,c),ce=de[0],ue=de[1],me=ce.table,he=me[1],fe=ce.row[0],_e=(l||me[0])-(y?[0]:ce.header)[0]-2,pe=h||Math.max(le,he),ge={columns:r,data:n,Cell:T,Row:I,Table:O,Body:B,classNamePrefix:K,tableClassName:se,rowClassName:U,rowWidthOffset:he-(ae.current&&ae.current.clientWidth||he)};return t.createElement("div",Object.assign({style:a({height:l?l+"px":"100%",width:h?h+"px":"100%",overflow:"auto",maxHeight:"100vh"},b)},ne),!o&&!!n.length&&t.createElement(O,{style:{height:0,opacity:0,display:"grid",overflow:"hidden",margin:0,border:0,outline:0,width:pe+"px"},className:se},t.createElement(z.Provider,{value:ge},t.createElement(C,{Header:k,HeaderRow:A,HeaderCell:L},t.createElement(m,{measure:ue,entity:"header",debounceWait:X,innerElementType:$}))),t.createElement(B,{className:K+"table-body",style:{overflowY:"scroll"}},t.createElement(I,{className:K+"table-row",ref:ae,style:{width:"100%",display:"flex"}},t.createElement(m,{measure:ue,entity:"row",debounceWait:X,innerElementType:te}),t.createElement(E,{datum:D||n[q],columns:r,classNamePrefix:K,Cell:T})))),t.createElement(z.Provider,{value:ge},t.createElement("div",null,!y&&he>0&&t.createElement(O,{style:{width:pe+"px",marginBottom:0},className:se},t.createElement(C,{Header:k,HeaderRow:A,HeaderCell:L})),!!n.length&&t.createElement(oe,{ref:i,height:_e,itemCount:n.length,itemSize:o||fe,width:pe,innerElementType:x,overscanCount:_,outerRef:ie,outerElementType:re},N))),(!l||!h)&&t.createElement(m,{measure:ue,entity:"table",debounceWait:X}))})),_),T=function(e){return void 0===e&&(e=""),function(i){return t.createElement("thead",Object.assign({},i,{className:e+" "+i.className}))}},H=t.useState,L=t.useMemo;exports.Html5Table=function(e){var i=e.headerClassName,r=s(e,["headerClassName"]);return t.createElement(R,Object.assign({Cell:"td",HeaderCell:"th",Header:T(i),HeaderRow:"tr",Row:"tr",Body:"tbody",Table:"table",headerCellInnerElementType:"th",tableCellInnerElementType:"td"},r))},exports.WindowTable=R,exports.createFilter=function(e){return function(t,i){return t.filter((function(t){return e.some((function(e){var r=t[e]?String(t[e]):"";return!(!i||!r.toLowerCase().includes(i.trim().toLowerCase()))}))}))}},exports.default=R,exports.useDebouncedState=function(e,t){void 0===t&&(t=100);var i=H(e),n=i[0],a=i[1],s=H(e),o=s[0],l=s[1],d=L((function(){return r(l,t)}),[t]);return[n,o,function(e){d.cancel(),a(e),d(e)}]},exports.useFilter=function(e,t,i){return L((function(){return i.length?e(t,i):t}),[t,e,i])};
//# sourceMappingURL=window-table.cjs.production.min.js.map
